db tables
db show names

db insert names data.yaml
db show names

# Compare the contents of a table
db cmp names names.table

# Compare against subset of the columns
db cmp names names_name.table

# Compare the table with retries up to 10s (1s is default)
db cmp -timeout=10s names names.table

# Compare only rows that match the grep pattern
db cmp -grep=^baz names baz.table

# Write the table to a file with specific columns
db write names -to=out.table -columns=Name,Tags

# Use the plain 'cmp'. You'll want to use 'UpdateScript'
# to create and update the expected output.
cmp out.table out_expected.table

# Write the table to a file as yaml
db write names -to=out.yaml -format=yaml
cmp out.yaml out_expected.yaml

# Prefix search the table with the primary key. Only useful
# for stringy primary keys.
db prefix names q
db prefix names ba -to=out_prefix_ba.table

# LowerBound searches
db lowerbound names a -to=out_lb_a.table
cmp out_lb_a.table out_expected.table
db lowerbound names z -to=out_lb_z.table
cmp out_lb_z.table empty.table

# Delete and check that it's empty.
db delete names quux-name.yaml
db cmp names baz.table
db cmp names out_prefix_ba.table

db delete names data.yaml
db cmp names empty.table

-- data.yaml --
name: quux
tags:
- foo
- bar
---
name: baz

-- quux-name.yaml --
name: quux

-- names.table --
Name Tags
baz
quux foo, bar

-- names_name.table --
Name
baz
quux

-- baz.table --
Name
baz

-- empty.table --
Name   Tags
-- out_expected.table --
Name   Tags
baz    
quux   foo, bar
-- out_expected.yaml --
name: baz
tags: []
---
name: quux
tags:
    - foo
    - bar
